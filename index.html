<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ficha de Avaliação Nutricional</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="style.css">

</head>

<body class="bg-light">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow">
                    <div class="card-header text-white">
                        <h2 class="h4 mb-0">Ficha de Anamnese</h2>
                    </div>
                    <div class="card-body">
                        <div class="progress mb-4">
                            <div id="form-progress" class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>

                        <div class="step-indicator">
                            <div class="row">
                                <div class="step active col-md-4" id="step-1-indicator">
                                    <div class="step-number">1</div>
                                    <div class="step-title">Dados do Paciente</div>
                                </div>
                                <div class="step col-md-4" id="step-2-indicator">
                                    <div class="step-number">2</div>
                                    <div class="step-title">Informações Complementares</div>
                                </div>
                                <div class="step col-md-4" id="step-3-indicator">
                                    <div class="step-number">3</div>
                                    <div class="step-title">Histórico de Peso e Hábitos</div>
                                </div>
                            </div>

                            <div class="row mt-2">
                                <div class="step col-md-4" id="step-4-indicator">
                                    <div class="step-number">4</div>
                                    <div class="step-title">Histórico de Saúde</div>
                                </div>
                                <div class="step col-md-4" id="step-5-indicator">
                                    <div class="step-number">5</div>
                                    <div class="step-title">Hábitos Alimentares</div>
                                </div>
                                <div class="step col-md-4" id="step-6-indicator">
                                    <div class="step-number">6</div>
                                    <div class="step-title">Confirmação</div>
                                </div>
                            </div>
                        </div>

                        <form id="nutrition-form" class="needs-validation" novalidate>
                            <div class="form-section active" id="section-1">
                                <h3 class="h5 mb-4 text-center">Dados do Paciente</h3>
                                <div class="row g-3">
                                    <div class="col-md-6 mb-3">
                                        <label for="nome" class="form-label">Nome completo*</label>
                                        <input type="text" name="nome" class="form-control" id="nome" required
                                            pattern="[A-Za-zÀ-ÿ\s]+" title="Apenas letras e espaços são permitidos.">
                                        <div class="invalid-feedback">Informe um nome completo válido (apenas letras e
                                            espaços).</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="data-nascimento" class="form-label">Data de Nascimento*</label>
                                        <input type="date" name="nascimento" class="form-control" min="1950-01-01"
                                            max="2020-12-31" id="data-nascimento" required>
                                        <div class="invalid-feedback">Por favor, insira uma data de nascimento válida
                                            entre 1950 e 2020.</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="idade" class="form-label">Idade*</label>
                                        <input type="number" name="idade" disabled class="form-control" id="idade"
                                            min="3" required>
                                        <div class="invalid-feedback">Informe a idade.</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label" for="sexo">Sexo*</label>
                                        <select name="sexo" id="sexo" class="form-select" required>
                                            <option value="" disabled selected>Selecione...</option>
                                            <option value="Masculino">Masculino</option>
                                            <option value="Feminino">Feminino</option>
                                        </select>
                                        <div class="invalid-feedback">Por favor, selecione seu sexo.</div>
                                    </div>

                                    <div class="col-md-6">
                                        <label for="email" class="form-label">E-mail*</label>
                                        <input type="email" class="form-control" id="email" required
                                            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                                            title="Por favor, insira um endereço de e-mail válido.">
                                        <div class="invalid-feedback">
                                            Por favor, insira um e-mail válido.
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="telefone" class="form-label">Telefone*</label>
                                        <input type="tel" class="form-control" id="telefone" required
                                            placeholder="+244 9XX XXX XXX" pattern="^\+244\s9\d{2}\s\d{3}\s\d{3}$"
                                            title="Formato: +244 9XX XXX XXX">
                                        <div class="invalid-feedback">
                                            Por favor, insira um telefone válido no formato 9XXXXXXXX.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label for="estado-civil" class="form-label">Estado Civil</label>
                                        <select id="estado-civil" name="estado_civil" class="form-control" required>
                                            <option value="">Selecione...</option>
                                            <option value="solteiro">Solteiro(a)</option>
                                            <option value="casado">Casado(a)</option>
                                            <option value="divorciado">Divorciado(a)</option>
                                            <option value="viuvo">Viúvo(a)</option>
                                            <option value="uniao-estavel">União Estável</option>
                                        </select>
                                        <div class="invalid-feedback">
                                            Por favor, selecione um estado civil.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label for="bi" class="form-label">Número do BI (Opcional)</label>
                                        <input type="text" id="bi" name="bi" class="form-control"
                                            placeholder="123456789LA123" maxlength="14" pattern="^\d{9}[A-Z]{2}\d{3}$"
                                            title="Formato: 9 dígitos, 2 letras maiúsculas, 3 dígitos (ex: 123456789LA123)"
                                            required>
                                        <div class="invalid-feedback"
                                            data-default-message="BI inválido. Formato: 9 dígitos, 2 letras maiúsculas, 3 dígitos (ex: 123456789LA123)">
                                            BI inválido. Formato: 123456789LA123
                                        </div>
                                    </div>

                                </div>
                                <div class="d-flex justify-content-end mt-4">
                                    <button type="button" class="btn btn-primary" onclick="nextStep()">Próximo</button>
                                </div>
                            </div>

                            <div class="form-section" id="section-2">
                                <h3 class="h5 mb-4 text-center">Informações Complementares</h3>
                                <div class="row g-3">

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Peso Atual (kg)</label>
                                        <input type="number" name="peso" id="peso" class="form-control" step="0.1"
                                            min="5" max="300" required
                                            title="Informe um peso entre 20.0 e 300.0 kg, com até uma casa decimal.">
                                        <div class="invalid-feedback">Informe um peso válido entre 20kg e 300kg, com
                                            até uma casa decimal.</div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Altura (m)</label>
                                        <input type="number" name="altura" id="altura" class="form-control" step="0.01"
                                            min="1" max="3" required title="Informe uma altura entre 1.00m e 3.00m.">
                                        <div class="invalid-feedback">
                                            Informe uma altura entre 1.00m e 3.00m.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Profissão</label>
                                        <input type="text" name="profissao" class="form-control" required
                                            pattern="[A-Za-zÀ-ÿ\s]+" title="Apenas letras e espaços são permitidos.">
                                        <div class="invalid-feedback">Informe sua profissão (apenas letras e espaços).
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Profissão / Ocupação e Carga Horária</label>
                                        <input type="text" name="ocupacao" class="form-control" required>
                                        <div class="invalid-feedback">Este campo é obrigatório.</div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Endereço</label>
                                        <input type="text" name="endereco" class="form-control" required>
                                        <div class="invalid-feedback">Informe seu endereço.</div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Data da Consulta</label>
                                        <input type="date" name="data" id="data-consulta" class="form-control" required>
                                        <div class="invalid-feedback">A data deve ser hoje ou posterior.</div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Histórico do Paciente</label>
                                        <textarea name="historico" class="form-control" rows="3" required></textarea>
                                        <div class="invalid-feedback">Descreva o histórico do paciente.</div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary"
                                        onclick="prevStep()">Anterior</button>
                                    <button type="button" class="btn btn-primary" onclick="nextStep()">Próximo</button>
                                </div>
                            </div>

                            <div class="form-section" id="section-3">
                                <h3 class="h5 mb-4 text-center">Histórico de Peso e Hábitos</h3>
                                <div class="mb-3">
                                    <label class="form-label">Qual foi seu peso máximo e mínimo?</label>
                                    <input type="text" name="peso_max_min" class="form-control"
                                        pattern="^\d+(\.\d+)?kg\s*-\s*\d+(\.\d+)?kg$"
                                        title="Formato: XX.Xkg - YY.Ykg (ex: 70kg - 60kg ou 70.5kg - 60.2kg)">
                                    <div class="invalid-feedback">Informe o peso máximo e mínimo no formato XX.Xkg -
                                        YY.Ykg.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Vida adulta:</label>
                                    <textarea name="vida_adulta" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Adolescência:</label>
                                    <textarea name="adolescencia" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Dificuldades referentes à sua alimentação (Qual a maior
                                        falha)?</label>
                                    <textarea name="dificuldades_alimentacao" class="form-control" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Hábitos de Vida:</label>
                                    <textarea name="habitos_vida" class="form-control" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Quantidade de água por dia?</label>
                                    <input type="text" name="agua_por_dia" class="form-control"
                                        pattern="^\d+\s*(litros|ml|copos|L|mL|copo(s)?)?$"
                                        title="Informe a quantidade de água (ex: 2 litros, 500ml, 8 copos).">
                                    <div class="invalid-feedback">Informe a quantidade de água por dia (ex: 2 litros,
                                        500ml, 8 copos).</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Frequência de Evacuação por dia</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq1"
                                            value="1" required>
                                        <label class="form-check-label" for="freq1">1</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq2"
                                            value="2">
                                        <label class="form-check-label" for="freq2">2</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq3"
                                            value="3">
                                        <label class="form-check-label" for="freq3">3</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq4"
                                            value="4">
                                        <label class="form-check-label" for="freq4">4</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq5"
                                            value="5">
                                        <label class="form-check-label" for="freq5">5</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq6"
                                            value="6">
                                        <label class="form-check-label" for="freq6">6</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao"
                                            id="freqNenhum" value="Nenhum">
                                        <label class="form-check-label" for="freqNenhum">Nenhum</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, selecione a frequência de evacuação.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Fumante?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="fumante" id="fumanteSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="fumanteSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="fumante" id="fumanteNao"
                                            value="Não">
                                        <label class="form-check-label" for="fumanteNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se é fumante.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Consome bebidas alcoólicas?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="alcool" id="alcoolSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="alcoolSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="alcool" id="alcoolNao"
                                            value="Não">
                                        <label class="form-check-label" for="alcoolNao">Não</label>
                                    </div>

                                    <div id="frequencia-alcool-container" class="ms-3" style="display: none;">
                                        <label for="freq_alcool" class="form-label">Se sim, qual frequência?</label>
                                        <select name="freq_alcool" id="freq_alcool" class="form-control">
                                            <option value="">Selecione...</option>
                                            <option value="Diária">Diária</option>
                                            <option value="Semanal">Semanal</option>
                                            <option value="Mensal">Mensal</option>
                                            <option value="Raramente">Raramente</option>
                                            <option value="Nunca">Nunca</option>
                                        </select>
                                        <div class="invalid-feedback">
                                            Informe a frequência do consumo de álcool (ex: Diária, Semanal).
                                        </div>
                                    </div>

                                    <div class="invalid-feedback">Por favor, indique se consome bebidas alcoólicas.
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Apetite</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="apetite"
                                                id="apetiteNormal" value="Normal" required>
                                            <label class="form-check-label" for="apetiteNormal">Normal</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="apetite"
                                                id="apetiteAumentado" value="Aumentado">
                                            <label class="form-check-label" for="apetiteAumentado">Aumentado</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="apetite"
                                                id="apetiteDiminuido" value="Diminuído">
                                            <label class="form-check-label" for="apetiteDiminuido">Diminuído</label>
                                        </div>
                                        <div class="invalid-feedback">Por favor, selecione seu apetite.</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Mastigação</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="mastigacao"
                                                id="mastigacaoNormal" value="Normal" required>
                                            <label class="form-check-label" for="mastigacaoNormal">Normal</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="mastigacao"
                                                id="mastigacaoRapida" value="Rápida">
                                            <label class="form-check-label" for="mastigacaoRapida">Rápida</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="mastigacao"
                                                id="mastigacaoLenta" value="Lenta">
                                            <label class="form-check-label" for="mastigacaoLenta">Lenta</label>
                                        </div>
                                        <div class="invalid-feedback">Por favor, selecione sua mastigação.</div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary"
                                        onclick="prevStep()">Anterior</button>
                                    <button type="button" class="btn btn-primary" onclick="nextStep()">Próximo</button>
                                </div>
                            </div>

                            <div class="form-section" id="section-4">
                                <hr>
                                <h3 class="h5 mb-4 text-center">Histórico de Saúde e Hábitos Alimentares</h3>

                                <div class="mb-3">
                                    <label class="form-label">Patologias (Quais?)</label>
                                    <textarea name="patologias" class="form-control" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Histórico Familiar</label>
                                    <textarea name="historico_familiar" class="form-control" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Exames</label>
                                    <textarea name="exames" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Faz alguma medicação?</label>
                                    <textarea name="medicacao" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Sinais e Sintomas, você possui algum desses?</label>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="ansiedade" value="Ansiedade">
                                                <label class="form-check-label" for="ansiedade">Ansiedade</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="ma_circulacao" value="Má circulação">
                                                <label class="form-check-label" for="ma_circulacao">Má
                                                    circulação</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="refluxo_azia" value="Refluxo, Azia">
                                                <label class="form-check-label" for="refluxo_azia">Refluxo, Azia</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="falta_memoria" value="Falta de Memória">
                                                <label class="form-check-label" for="falta_memoria">Falta de
                                                    Memória</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="irritabilidade" value="Irritabilidade">
                                                <label class="form-check-label"
                                                    for="irritabilidade">Irritabilidade</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="depressao" value="Depressão">
                                                <label class="form-check-label" for="depressao">Depressão</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="fadiga" value="Fadiga">
                                                <label class="form-check-label" for="fadiga">Fadiga</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="indigestao" value="Indigestão">
                                                <label class="form-check-label" for="indigestao">Indigestão</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="dores_corpo" value="Dores no Corpo">
                                                <label class="form-check-label" for="dores_corpo">Dores no Corpo</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="outros_sintomas" value="Outros">
                                                <label class="form-check-label" for="outros_sintomas">Outros</label>
                                            </div>
                                            <input type="text" name="outros_sintomas_text" id="outros_sintomas_text"
                                                class="form-control mt-2" placeholder="Descreva outros sintomas"
                                                style="display: none;">
                                        </div>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary"
                                        onclick="prevStep()">Anterior</button>
                                    <button type="button" class="btn btn-primary" onclick="nextStep()">Próximo</button>
                                </div>
                            </div>

                            <div class="form-section" id="section-5">
                                <h3 class="h5 mb-4 text-center">Hábitos Alimentares</h3>
                                <div class="mb-3">
                                    <label class="form-label">Quantas refeições por dia?</label>
                                    <input type="number" name="refeicoes_dia" class="form-control" min="1" max="10"
                                        required>
                                    <div class="invalid-feedback">Informe o número de refeições por dia (1-10).</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Horários das refeições</label>
                                    <textarea name="horarios_refeicoes" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Onde costuma realizar suas refeições?</label>
                                    <textarea name="local_refeicoes" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Quem prepara suas refeições?</label>
                                    <textarea name="quem_prepara" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Você tem o hábito de comer assistindo TV/celular?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="come_assistindo"
                                            id="comeAssistindoSim" value="Sim" required>
                                        <label class="form-check-label" for="comeAssistindoSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="come_assistindo"
                                            id="comeAssistindoNao" value="Não">
                                        <label class="form-check-label" for="comeAssistindoNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se come assistindo TV/celular.
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Você tem o hábito de comer rápido?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="come_rapido"
                                            id="comeRapidoSim" value="Sim" required>
                                        <label class="form-check-label" for="comeRapidoSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="come_rapido"
                                            id="comeRapidoNao" value="Não">
                                        <label class="form-check-label" for="comeRapidoNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se come rápido.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Você tem o hábito de fazer dieta?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="faz_dieta" id="fazDietaSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="fazDietaSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="faz_dieta" id="fazDietaNao"
                                            value="Não">
                                        <label class="form-check-label" for="fazDietaNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se faz dieta.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Sente necessidade de fazer lanches ou petiscar
                                        entre refeições?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="petiscar" id="petiscarSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="petiscarSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="petiscar" id="petiscarNao"
                                            value="Não">
                                        <label class="form-check-label" for="petiscarNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se sente necessidade de petiscar.
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Você tem o hábito de jantar?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="jantar" id="jantarSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="jantarSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="jantar" id="jantarNao"
                                            value="Não">
                                        <label class="form-check-label" for="jantarNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se janta.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Você tem o hábito de tomar café da manhã?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="cafe_manha" id="cafeManhaSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="cafeManhaSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="cafe_manha" id="cafeManhaNao"
                                            value="Não">
                                        <label class="form-check-label" for="cafeManhaNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se toma café da manhã.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Você tem o hábito de almoçar?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="almocar" id="almocarSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="almocarSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="almocar" id="almocarNao"
                                            value="Não">
                                        <label class="form-check-label" for="almocarNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se almoça.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Alimentos que não gosta</label>
                                    <textarea name="alimentos_nao_gosta" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Alimentos preferidos</label>
                                    <textarea name="alimentos_preferidos" class="form-control" rows="2"></textarea>
                                </div>
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary"
                                        onclick="prevStep()">Anterior</button>
                                    <button type="button" class="btn btn-primary" onclick="nextStep()">Próximo</button>
                                </div>
                            </div>

                            <div class="form-section" id="section-6">
                                <h3 class="h5 mb-4 text-center">Confirmação e Envio</h3>
                                <div class="alert alert-info" role="alert">
                                    Revise todas as informações antes de enviar. Um PDF será gerado com os dados e
                                    enviado para o seu e-mail.
                                </div>
                                <div class="d-flex justify-content-between mt-4">
                                    <button type="button" class="btn btn-secondary"
                                        onclick="prevStep()">Anterior</button>
                                    <button type="submit" class="btn btn-success">Gerar PDF e Enviar Email</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="pdf-output" style="display:none; border-top: 20px solid #4CAF50;  border-radius: 10px 10px 0 10px;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
            <h1 style="
                    margin: 0;
                    text-align: left;
                    font-size: 25px;
                    border-bottom: 5px solid #4CAF50;
                    display: flex;
                    align-items: center;">
                Ficha de Anamnese e <br> Avaliação Nutricional
            </h1>
            <img src="logo.png" alt="Logotipo" width="150" height="150">
        </div>


        <div style="
            position: fixed;
            top: 35%;
            left: 40%;
            transform: rotate(-30deg);
            z-index: 0;
            pointer-events: none;
            opacity: 0.2;">
            <img src="./logo-marca.png" alt="Marca d'água" style="width: 400px;">
        </div>

        <h3>Dados Pessoais</h3>
        <p><strong>Nome:</strong> <span id="pdf-nome"></span></p>
        <p><strong>Data de Nascimento:</strong> <span id="pdf-data-nascimento"></span></p>
        <p><strong>Idade:</strong> <span id="pdf-idade"></span></p>
        <p><strong>Sexo:</strong> <span id="pdf-sexo"></span></p>
        <p><strong>Email:</strong> <span id="pdf-email"></span></p>
        <p><strong>Telefone:</strong> <span id="pdf-telefone"></span></p>
        <p><strong>Estado Civil:</strong> <span id="pdf-estado-civil"></span></p>
        <p><strong>BI:</strong> <span id="pdf-bi"></span></p>

        <h3>Medidas Corporais</h3>
        <p><strong>Peso:</strong> <span id="pdf-peso"></span></p>
        <p><strong>Altura:</strong> <span id="pdf-altura"></span></p>

        <h3>Informações Gerais</h3>
        <p><strong>Profissão:</strong> <span id="pdf-profissao"></span></p>
        <p><strong>Ocupação:</strong> <span id="pdf-ocupacao"></span></p>
        <p><strong>Endereço:</strong> <span id="pdf-endereco"></span></p>
        <p><strong>Data da Consulta:</strong> <span id="pdf-data-consulta"></span></p>
        <p><strong>Histórico:</strong> <span id="pdf-historico"></span></p>

        <h3>Histórico Alimentar</h3>
        <p><strong>Peso Máximo/Mínimo:</strong> <span id="pdf-peso_max_min"></span></p>
        <p><strong>Vida Adulta:</strong> <span id="pdf-vida_adulta"></span></p>
        <p><strong>Adolescência:</strong> <span id="pdf-adolescencia"></span></p>
        <p><strong>Dificuldades Alimentares:</strong> <span id="pdf-dificuldades_alimentacao"></span></p>
        <p><strong>Hábitos de Vida:</strong> <span id="pdf-habitos_vida"></span></p>
        <p><strong>Água por dia:</strong> <span id="pdf-agua_por_dia"></span></p>
        <p><strong>Frequência de evacuação:</strong> <span id="pdf-freq_evacuacao"></span></p>
        <p><strong>Fumante:</strong> <span id="pdf-fumante"></span></p>
        <p><strong>Consumo de Álcool:</strong> <span id="pdf-alcool"></span></p>
        <p><strong>Frequência do Álcool:</strong> <span id="pdf-freq_alcool"></span></p>
        <p><strong>Apetite:</strong> <span id="pdf-apetite"></span></p>
        <p><strong>Mastigação:</strong> <span id="pdf-mastigacao"></span></p>

        <h3>Saúde</h3>
        <p><strong>Patologias:</strong> <span id="pdf-patologias"></span></p>
        <p><strong>Histórico Familiar:</strong> <span id="pdf-historico_familiar"></span></p>
        <p><strong>Exames:</strong> <span id="pdf-exames"></span></p>
        <p><strong>Medicação:</strong> <span id="pdf-medicacao"></span></p>
        <p><strong>Sintomas:</strong> <span id="pdf-sintomas"></span></p>
        <p><strong>Outros Sintomas:</strong> <span id="pdf-outros_sintomas_text"></span></p>

        <h3>Rotina Alimentar</h3>
        <p><strong>Refeições por dia:</strong> <span id="pdf-refeicoes_dia"></span></p>
        <p><strong>Horários das refeições:</strong> <span id="pdf-horarios_refeicoes"></span></p>
        <p><strong>Local das refeições:</strong> <span id="pdf-local_refeicoes"></span></p>
        <p><strong>Quem prepara a comida:</strong> <span id="pdf-quem_prepara"></span></p>
        <p><strong>Come assistindo TV:</strong> <span id="pdf-come_assistindo"></span></p>
        <p><strong>Come rápido:</strong> <span id="pdf-come_rapido"></span></p>
        <p><strong>Faz dieta:</strong> <span id="pdf-faz_dieta"></span></p>
        <p><strong>Petisca entre as refeições:</strong> <span id="pdf-petiscar"></span></p>
        <p><strong>Jantar:</strong> <span id="pdf-jantar"></span></p>
        <p><strong>Café da manhã:</strong> <span id="pdf-cafe_manha"></span></p>
        <p><strong>Almoço:</strong> <span id="pdf-almocar"></span></p>
        <p><strong>Alimentos que não gosta:</strong> <span id="pdf-alimentos_nao_gosta"></span></p>
        <p><strong>Alimentos preferidos:</strong> <span id="pdf-alimentos_preferidos"></span></p>
        <hr>
        <div style="text-align: center; font-size: 12px; margin-top: 20px;">
            📞 Telefone: (244) 999-999-999 &nbsp; | &nbsp; ✉️ Email: contato@clinica.com &nbsp; | &nbsp; 📍 Luanda -
            Angola<br>
            <em>Gerado em: <span id="data-geracao-pdf"></span></em>
        </div>

        <script>
            // Preenche a data atual no rodapé
            document.getElementById('data-geracao-pdf').textContent = new Date().toLocaleDateString();
        </script>

    </div>

    <!-- Inclua o Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <div id="whatsapp-button" style="display: none; text-align: center; margin-top: 30px;">
        <a href="https://wa.me/244940923748?text=Olá! Segue minha ficha de anamnese nutricional em anexo."
            target="_blank"
            class="btn btn-success btn-lg d-inline-flex align-items-center gap-2 shadow rounded-pill px-4 py-2">
            <i class="bi bi-whatsapp fs-4"></i>
            <span>Enviar PDF via WhatsApp</span>
        </a>
        <div class="form-text mt-2 text-muted">
            📎 Certifique-se de anexar o PDF gerado ao enviar a mensagem.
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const input = document.getElementById("telefone");

            input.addEventListener("input", function (e) {
                let value = input.value.replace(/\D/g, ""); // remove tudo que não é dígito

                if (value.startsWith("244")) {
                    value = value.slice(3); // remove o 244 duplicado
                }

                if (value.startsWith("9")) {
                    // Aplica formatação: +244 9XX XXX XXX
                    let formatted = "+244 ";

                    if (value.length > 0) formatted += value.substring(0, 3);
                    if (value.length > 3) formatted += " " + value.substring(3, 6);
                    if (value.length > 6) formatted += " " + value.substring(6, 9);

                    input.value = formatted;
                } else {
                    input.value = "+244 ";
                }
            });

            // Garante que o campo já venha com +244
            input.value = "+244 ";
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const alcoolSim = document.getElementById('alcoolSim');
            const alcoolNao = document.getElementById('alcoolNao');
            const freqContainer = document.getElementById('frequencia-alcool-container');
            const freqSelect = document.getElementById('freq_alcool');

            function toggleFrequenciaAlcool() {
                if (alcoolSim.checked) {
                    freqContainer.style.display = 'block';
                    freqSelect.setAttribute('required', 'required');
                } else {
                    freqContainer.style.display = 'none';
                    freqSelect.removeAttribute('required');
                    freqSelect.value = ''; // limpa o select
                }
            }

            alcoolSim.addEventListener('change', toggleFrequenciaAlcool);
            alcoolNao.addEventListener('change', toggleFrequenciaAlcool);
        });
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>

</html>
