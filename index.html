<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Ficha de Avaliação Nutricional</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-light">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow">
                    <div class="card-header bg-primary text-white">
                        <h2 class="h4 mb-0">Ficha de Anamnese</h2>
                    </div>
                    <div class="card-body">
                        <div class="progress mb-4">
                            <div id="form-progress" class="progress-bar" role="progressbar" style="width: 0%"></div>
                        </div>

                        <div class="step-indicator">
                            <div class="row">
                                <div class="step active col-md-6" id="step-1-indicator">
                                    <div class="step-number">1</div>
                                    <div class="step-title">Dados do Paciente</div>
                                </div>
                                <div class="step col-md-6" id="step-2-indicator">
                                    <div class="step-number">2</div>
                                    <div class="step-title">Informações Complementares</div>
                                </div>
                                <div class="step col-md-6" id="step-3-indicator">
                                    <div class="step-number">3</div>
                                    <div class="step-title">Histórico de Peso e Hábitos</div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="step col-md-6" id="step-4-indicator">
                                    <div class="step-number">4</div>
                                    <div class="step-title">Histórico de Saúde e Hábitos Alimentares</div>
                                </div>
                                <div class="step col-md-6" id="step-5-indicator">
                                    <div class="step-number">5</div>
                                    <div class="step-title">Hábitos Alimentares</div>
                                </div>
                                <div class="step col-md-6" id="step-6-indicator">
                                    <div class="step-number">6</div>
                                    <div class="step-title">Confirmação</div>
                                </div>
                            </div>
                        </div>

                        <form id="nutrition-form" class="needs-validation" novalidate>
                            <div class="form-section active" id="section-1">
                                <h3 class="h5 mb-4 text-center">Dados do Paciente</h3>
                                <div class="row g-3">
                                    <div class="col-md-6 mb-3">
                                        <label for="nome" class="form-label">Nome completo*</label>
                                        <input type="text" name="nome" class="form-control" id="nome" required
                                            pattern="[A-Za-zÀ-ÿ\s]+"
                                            title="Apenas letras e espaços são permitidos.">
                                        <div class="invalid-feedback">Informe um nome completo válido (apenas letras e
                                            espaços).</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="data-nascimento" class="form-label">Data de Nascimento*</label>
                                        <input type="date" name="nascimento" class="form-control" min="1950-01-01"
                                            max="2020-12-31" id="data-nascimento" required>
                                        <div class="invalid-feedback">Por favor, insira uma data de nascimento válida
                                            entre 1950 e 2020.</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="idade" class="form-label">Idade*</label>
                                        <input type="number" name="idade" disabled class="form-control" id="idade"
                                            min="3" required>
                                        <div class="invalid-feedback">Informe a idade.</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label" for="sexo">Sexo*</label>
                                        <select name="sexo" id="sexo" class="form-select" required>
                                            <option value="" disabled selected>Selecione...</option>
                                            <option value="Masculino">Masculino</option>
                                            <option value="Feminino">Feminino</option>
                                        </select>
                                        <div class="invalid-feedback">Por favor, selecione seu sexo.</div>
                                    </div>

                                    <div class="col-md-6">
                                        <label for="email" class="form-label">E-mail*</label>
                                        <input type="email" class="form-control" id="email" required
                                            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                                            title="Por favor, insira um endereço de e-mail válido.">
                                        <div class="invalid-feedback">
                                            Por favor, insira um e-mail válido.
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="telefone" class="form-label">Telefone*</label>
                                        <input type="tel" class="form-control" id="telefone" required
                                            placeholder="+244 9XX XXX XXX" pattern="^\+244\s9\d{2}\s\d{3}\s\d{3}$"
                                            title="Formato: +244 9XX XXX XXX">
                                        <div class="invalid-feedback">
                                            Por favor, insira um telefone válido no formato +244 9XX XXX XXX.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label for="estado-civil" class="form-label">Estado Civil</label>
                                        <select id="estado-civil" name="estado_civil" class="form-control" required>
                                            <option value="">Selecione...</option>
                                            <option value="solteiro">Solteiro(a)</option>
                                            <option value="casado">Casado(a)</option>
                                            <option value="divorciado">Divorciado(a)</option>
                                            <option value="viuvo">Viúvo(a)</option>
                                            <option value="uniao-estavel">União Estável</option>
                                        </select>
                                        <div class="invalid-feedback">
                                            Por favor, selecione um estado civil.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label for="bi" class="form-label">Número do BI (Opcional)</label>
                                        <input type="text" id="bi" name="bi" class="form-control"
                                            placeholder="123456789LA123" maxlength="14"
                                            pattern="^\d{9}[A-Z]{2}\d{3}$"
                                            title="Formato: 9 dígitos, 2 letras maiúsculas, 3 dígitos (ex: 123456789LA123)">
                                        <div class="invalid-feedback"
                                            data-default-message="BI inválido. Formato: 9 dígitos, 2 letras maiúsculas, 3 dígitos (ex: 123456789LA123)">
                                            BI inválido. Formato: 123456789LA123
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="form-section" id="section-2">
                                <h3 class="h5 mb-4 text-center">Informações Complementares</h3>
                                <div class="row g-3">

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Peso Atual (kg)</label>
                                        <input type="number" name="peso" id="peso" class="form-control" step="0.1"
                                            min="20" max="300" required
                                            pattern="^\d{2,3}(\.\d{1})?$"
                                            title="Informe um peso entre 20.0 e 300.0 kg, com até uma casa decimal.">
                                        <div class="invalid-feedback">Informe um peso válido entre 20kg e 300kg, com
                                            até uma casa decimal.</div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Altura (cm)</label>
                                        <input type="number" name="altura" id="altura" class="form-control" step="0.1"
                                            min="100" max="250" required
                                            pattern="^\d{3}(\.\d{1})?$"
                                            title="Informe uma altura entre 100.0 e 250.0 cm, com até uma casa decimal.">
                                        <div class="invalid-feedback">Informe uma altura válida entre 100cm e 250cm,
                                            com até uma casa decimal.
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Profissão</label>
                                        <input type="text" name="profissao" class="form-control" required
                                            pattern="[A-Za-zÀ-ÿ\s]+"
                                            title="Apenas letras e espaços são permitidos.">
                                        <div class="invalid-feedback">Informe sua profissão (apenas letras e espaços).
                                        </div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Profissão / Ocupação e Carga Horária</label>
                                        <input type="text" name="ocupacao" class="form-control" required>
                                        <div class="invalid-feedback">Este campo é obrigatório.</div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Endereço</label>
                                        <input type="text" name="endereco" class="form-control" required>
                                        <div class="invalid-feedback">Informe seu endereço.</div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Data da Consulta</label>
                                        <input type="date" name="data" id="data-consulta" class="form-control" required>
                                        <div class="invalid-feedback">A data deve ser hoje ou posterior.</div>
                                    </div>

                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Histórico do Paciente</label>
                                        <textarea name="historico" class="form-control" rows="3" required></textarea>
                                        <div class="invalid-feedback">Descreva o histórico do paciente.</div>
                                    </div>
                                </div>
                            </div>


                            <div class="form-section" id="section-3">
                                <h3 class="h5 mb-4 text-center">Histórico de Peso e Hábitos</h3>
                                <div class="mb-3">
                                    <label class="form-label">Qual foi seu peso máximo e mínimo?</label>
                                    <input type="text" name="peso_max_min" class="form-control"
                                        pattern="^\d+(\.\d+)?kg\s*-\s*\d+(\.\d+)?kg$"
                                        title="Formato: XX.Xkg - YY.Ykg (ex: 70kg - 60kg ou 70.5kg - 60.2kg)">
                                    <div class="invalid-feedback">Informe o peso máximo e mínimo no formato XX.Xkg -
                                        YY.Ykg.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Vida adulta:</label>
                                    <textarea name="vida_adulta" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Adolescência:</label>
                                    <textarea name="adolescencia" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Dificuldades referentes à sua alimentação (Qual a maior
                                        falha)?</label>
                                    <textarea name="dificuldades_alimentacao" class="form-control" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Hábitos de Vida:</label>
                                    <textarea name="habitos_vida" class="form-control" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Quantidade de água por dia?</label>
                                    <input type="text" name="agua_por_dia" class="form-control"
                                        pattern="^\d+\s*(litros|ml|copos|L|mL|copo(s)?)?$"
                                        title="Informe a quantidade de água (ex: 2 litros, 500ml, 8 copos).">
                                    <div class="invalid-feedback">Informe a quantidade de água por dia (ex: 2 litros,
                                        500ml, 8 copos).</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Frequência de Evacuação por dia</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq1"
                                            value="1" required>
                                        <label class="form-check-label" for="freq1">1</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq2"
                                            value="2">
                                        <label class="form-check-label" for="freq2">2</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq3"
                                            value="3">
                                        <label class="form-check-label" for="freq3">3</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq4"
                                            value="4">
                                        <label class="form-check-label" for="freq4">4</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq5"
                                            value="5">
                                        <label class="form-check-label" for="freq5">5</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao" id="freq6"
                                            value="6">
                                        <label class="form-check-label" for="freq6">6</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="freq_evacuacao"
                                            id="freqNenhum" value="Nenhum">
                                        <label class="form-check-label" for="freqNenhum">Nenhum</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, selecione a frequência de evacuação.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Fumante?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="fumante" id="fumanteSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="fumanteSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="fumante" id="fumanteNao"
                                            value="Não">
                                        <label class="form-check-label" for="fumanteNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se é fumante.</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Consome bebidas alcoólicas?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="alcool" id="alcoolSim"
                                            value="Sim" required>
                                        <label class="form-check-label" for="alcoolSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="alcool" id="alcoolNao"
                                            value="Não">
                                        <label class="form-check-label" for="alcoolNao">Não</label>
                                    </div>
                                    <div class="ms-3">
                                        <label class="form-label">Se sim, qual frequência?</label>
                                        <input type="text" name="freq_alcool" class="form-control"
                                            pattern="^(Diária|Semanal|Mensal|Raramente|Nunca)$|^$"
                                            title="Informe a frequência (Diária, Semanal, Mensal, Raramente, Nunca).">
                                        <div class="invalid-feedback">Informe a frequência do consumo de álcool (ex:
                                            Diária, Semanal).</div>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se consome bebidas alcoólicas.
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Apetite</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="apetite"
                                                id="apetiteNormal" value="Normal" required>
                                            <label class="form-check-label" for="apetiteNormal">Normal</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="apetite"
                                                id="apetiteAumentado" value="Aumentado">
                                            <label class="form-check-label" for="apetiteAumentado">Aumentado</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="apetite"
                                                id="apetiteDiminuido" value="Diminuído">
                                            <label class="form-check-label" for="apetiteDiminuido">Diminuído</label>
                                        </div>
                                        <div class="invalid-feedback">Por favor, selecione seu apetite.</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Mastigação</label>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="mastigacao"
                                                id="mastigacaoNormal" value="Normal" required>
                                            <label class="form-check-label" for="mastigacaoNormal">Normal</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="mastigacao"
                                                id="mastigacaoRapida" value="Rápida">
                                            <label class="form-check-label" for="mastigacaoRapida">Rápida</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="mastigacao"
                                                id="mastigacaoLenta" value="Lenta">
                                            <label class="form-check-label" for="mastigacaoLenta">Lenta</label>
                                        </div>
                                        <div class="invalid-feedback">Por favor, selecione sua mastigação.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-section" id="section-4">
                                <hr>
                                <h3 class="h5 mb-4 text-center">Histórico de Saúde e Hábitos Alimentares</h3>

                                <div class="mb-3">
                                    <label class="form-label">Patologias (Quais?)</label>
                                    <textarea name="patologias" class="form-control" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Histórico Familiar</label>
                                    <textarea name="historico_familiar" class="form-control" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Exames</label>
                                    <textarea name="exames" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Faz alguma medicação?</label>
                                    <textarea name="medicacao" class="form-control" rows="2"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">Sinais e Sintomas, você possui algum desses?</label>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="ansiedade" value="Ansiedade">
                                                <label class="form-check-label" for="ansiedade">Ansiedade</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="ma_circulacao" value="Má circulação">
                                                <label class="form-check-label" for="ma_circulacao">Má
                                                    circulação</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="refluxo_azia" value="Refluxo, Azia">
                                                <label class="form-check-label" for="refluxo_azia">Refluxo, Azia</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="falta_memoria" value="Falta de Memória">
                                                <label class="form-check-label" for="falta_memoria">Falta de
                                                    Memória</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="irritabilidade" value="Irritabilidade">
                                                <label class="form-check-label"
                                                    for="irritabilidade">Irritabilidade</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="depressao" value="Depressão">
                                                <label class="form-check-label" for="depressao">Depressão</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="fadiga" value="Fadiga">
                                                <label class="form-check-label" for="fadiga">Fadiga</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="indigestao" value="Indigestão">
                                                <label class="form-check-label" for="indigestao">Indigestão</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="dores_corpo" value="Dores no Corpo">
                                                <label class="form-check-label" for="dores_corpo">Dores no Corpo</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="sintomas"
                                                    id="outros_sintomas" value="Outros">
                                                <label class="form-check-label" for="outros_sintomas">Outros</label>
                                            </div>
                                            <input type="text" name="outros_sintomas_descricao"
                                                class="form-control mt-2" placeholder="Descreva outros sintomas"
                                                pattern="[A-Za-zÀ-ÿ\s]+"
                                                title="Apenas letras e espaços são permitidos.">
                                            <div class="invalid-feedback">Descreva outros sintomas (apenas letras e
                                                espaços).</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section" id="section-5">
                                <hr>
                                <h3 class="h5 mb-4 text-center">Hábitos Alimentares</h3>
                                <div class="mb-3">
                                    <label class="form-label">Faz as refeições fora de casa?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="refeicoes_fora_casa"
                                            id="refeicoesSim" value="Sim" required>
                                        <label class="form-check-label" for="refeicoesSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="refeicoes_fora_casa"
                                            id="refeicoesNao" value="Não">
                                        <label class="form-check-label" for="refeicoesNao">Não</label>
                                    </div>
                                    <div class="ms-3">
                                        <label class="form-label">Se sim, onde faz?</label>
                                        <input type="text" name="onde_refeicoes" class="form-control">
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se faz refeições fora de casa.
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Quem faz as compras?</label>
                                    <input type="text" name="quem_faz_compras" class="form-control"
                                        pattern="[A-Za-zÀ-ÿ\s]+"
                                        title="Apenas letras e espaços são permitidos.">
                                    <div class="invalid-feedback">Informe quem faz as compras (apenas letras e
                                        espaços).</div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Alergia ou Intolerância?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="alergia_intolerancia"
                                            id="alergiaSim" value="Sim" required>
                                        <label class="form-check-label" for="alergiaSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="alergia_intolerancia"
                                            id="alergiaNao" value="Não">
                                        <label class="form-check-label" for="alergiaNao">Não</label>
                                    </div>
                                    <div class="ms-3">
                                        <label class="form-label">Se sim, quais?</label>
                                        <input type="text" name="quais_alergias" class="form-control">
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se possui alergia ou intolerância.
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Alimentos que não gosta?</label>
                                    <input type="text" name="alimentos_nao_gosta" class="form-control">
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Alimentos que não consome por opção (Vegetariano, vegano,
                                        etc.)?</label>
                                    <input type="text" name="alimentos_nao_consome" class="form-control">
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Tem o hábito de comer assistindo TV/Celular?</label>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="comer_tv_celular"
                                            id="comerTvSim" value="Sim" required>
                                        <label class="form-check-label" for="comerTvSim">Sim</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="comer_tv_celular"
                                            id="comerTvNao" value="Não">
                                        <label class="form-check-label" for="comerTvNao">Não</label>
                                    </div>
                                    <div class="invalid-feedback">Por favor, indique se tem o hábito de comer
                                        assistindo TV/Celular.</div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Horário de se deitar e de se levantar?</label>
                                    <input type="text" name="horario_sono" class="form-control"
                                        pattern="^\d{2}:\d{2}\s*-\s*\d{2}:\d{2}$"
                                        title="Formato: HH:MM - HH:MM (ex: 22:00 - 07:00)">
                                    <div class="invalid-feedback">Informe o horário no formato HH:MM - HH:MM.</div>
                                </div>
                                <div class="mb-2">
                                    <label class="form-label">Qual o seu objetivo com o acompanhamento nutricional?
                                        (O que espera do atendimento?)</label>
                                    <textarea name="objetivo_acompanhamento" class="form-control" rows="3"
                                        required></textarea>
                                    <div class="invalid-feedback">Descreva seu objetivo com o acompanhamento
                                        nutricional.</div>
                                </div>
                            </div>
                            <div class="form-section" id="section-6">
                                <h3 class="h5 mb-4 text-center">Confirmação</h3>
                                <p class="text-center">Por favor, revise suas informações e clique em "Enviar" para
                                    finalizar.</p>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="confirmacao" required>
                                    <label class="form-check-label" for="confirmacao">
                                        Declaro que as informações fornecidas são verdadeiras e completas.
                                    </label>
                                    <div class="invalid-feedback">Você deve confirmar que as informações são
                                        verdadeiras.</div>
                                </div>
                            </div>

                            <div class="d-flex justify-content-between mt-4">
                                <button type="button" class="btn btn-secondary" id="prev-btn" style="display: none;">
                                    Anterior
                                </button>
                                <button type="button" class="btn btn-primary" id="next-btn">
                                    Próximo
                                </button>
                                <button type="submit" class="btn btn-success" id="submit-btn" style="display: none;">
                                    Enviar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let currentSection = 0;
            const formSections = document.querySelectorAll('.form-section');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            const formProgress = document.getElementById('form-progress');
            const stepIndicators = document.querySelectorAll('.step-indicator .step');
            const nutritionForm = document.getElementById('nutrition-form');

            function updateProgress() {
                const progress = ((currentSection + 1) / formSections.length) * 100;
                formProgress.style.width = `${progress}%`;
                formProgress.setAttribute('aria-valuenow', progress);

                stepIndicators.forEach((indicator, index) => {
                    if (index === currentSection) {
                        indicator.classList.add('active');
                    } else {
                        indicator.classList.remove('active');
                    }
                });
            }

            function showSection(index) {
                formSections.forEach((section, i) => {
                    section.classList.toggle('active', i === index);
                });

                prevBtn.style.display = index === 0 ? 'none' : 'block';
                nextBtn.style.display = index === formSections.length - 1 ? 'none' : 'block';
                submitBtn.style.display = index === formSections.length - 1 ? 'block' : 'none';
                currentSection = index;
                updateProgress();
            }

            function validateSection(sectionIndex) {
                const currentFormSection = formSections[sectionIndex];
                const inputs = currentFormSection.querySelectorAll('input:required, select:required, textarea:required, input[pattern]');
                let isValid = true;

                inputs.forEach(input => {
                    if (input.type === 'radio') {
                        const radioGroup = document.querySelectorAll(`input[name="${input.name}"]`);
                        const isRadioChecked = Array.from(radioGroup).some(radio => radio.checked);
                        if (!isRadioChecked) {
                            isValid = false;
                            radioGroup.forEach(radio => {
                                radio.classList.add('is-invalid');
                            });
                        } else {
                            radioGroup.forEach(radio => {
                                radio.classList.remove('is-invalid');
                            });
                        }
                    } else if (input.checkValidity()) {
                        input.classList.remove('is-invalid');
                        input.classList.add('is-valid');
                    } else {
                        input.classList.add('is-invalid');
                        input.classList.remove('is-valid');
                        isValid = false;
                    }
                });
                return isValid;
            }


            nextBtn.addEventListener('click', function () {
                if (validateSection(currentSection)) {
                    if (currentSection < formSections.length - 1) {
                        showSection(currentSection + 1);
                    }
                } else {
                    // Force Bootstrap to show validation messages
                    nutritionForm.classList.add('was-validated');
                }
            });

            prevBtn.addEventListener('click', function () {
                if (currentSection > 0) {
                    showSection(currentSection - 1);
                }
            });

            // Calculate age dynamically
            document.getElementById('data-nascimento').addEventListener('change', function () {
                const birthDate = new Date(this.value);
                const today = new Date();
                let age = today.getFullYear() - birthDate.getFullYear();
                const m = today.getMonth() - birthDate.getMonth();
                if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                document.getElementById('idade').value = age;
            });

            // Validate future date for 'Data da Consulta'
            document.getElementById('data-consulta').addEventListener('change', function () {
                const consultaDate = new Date(this.value);
                const today = new Date();
                today.setHours(0, 0, 0, 0); // Reset time for accurate date comparison

                if (consultaDate < today) {
                    this.setCustomValidity('A data deve ser hoje ou posterior.');
                    this.classList.add('is-invalid');
                } else {
                    this.setCustomValidity('');
                    this.classList.remove('is-invalid');
                    this.classList.add('is-valid');
                }
            });

            // Handle submission
            nutritionForm.addEventListener('submit', function (event) {
                if (!validateSection(currentSection) || !nutritionForm.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                nutritionForm.classList.add('was-validated');
                alert('Formulário enviado com sucesso!'); // Or handle form submission via AJAX
            }, false);

            showSection(0); // Initialize form
        });
    </script>
</body>

</html>
